<html>

<head>
<script src="../fast/js/resources/js-test-pre.js"></script>
</head>

<body>
<script>
var vid;
var fileName = 'media/O-MP2TS_SN-2.mpg';
var canplay = false;

function playing()
{
	testPassed("Video Track is playing.");
}

function paused()
{
	testPassed("Video Track is paused.");
	finishJSTest();
}

function playable() {
	canplay = true;
	vid = document.getElementsByTagName("video")[0];
	vid.audioTracks.oncanplay = null;
	testPassed("Video Track is playable: " + fileName);
	
	vid.addEventListener("playing", playing, true);
	vid.addEventListener("pause", paused, true);
	
	vid.play();
	vid.currentTime = 3;
	vid.pause();
	
}

function notPlayable()
{
	if (canplay)
		return;
	
	testFailed("Video Track is NOT playable: " + fileName);
}

function insertCtrl() {
	var body = document.getElementsByTagName("body")[0];
	var v = document.createElement("video");
	v.setAttribute('controls', 'yes');
	v.setAttribute('width', '740px');
	v.addEventListener("canplay", playable, true);
	var src = document.createElement("source");
	src.setAttribute('src', fileName);
	v.appendChild(src);
	body.appendChild(v);
	setTimeout(notPlayable,4000);
}

insertCtrl();
description('Tests DLNA Player for AV Media Format. RUIHPL-7.9.3.1.2: MPEG_TS_SD_NA MP2 MP@ML AC3');
window.jsTestIsAsync = true;
</script>

<script src="../fast/js/resources/js-test-post.js"></script>
</body>

</html>

